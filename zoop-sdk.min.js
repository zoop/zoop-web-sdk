(()=>{const o=Object.freeze({POPUP:"POPUP",TAB:"TAB"});!function(){var e={zoopGateWayModel:{display:"none",position:"fixed","z-index":1,left:0,top:0,width:"100%",height:"100%",overflow:"auto","background-color":"rgba(0, 0, 0, 0.4)"},zoopModelContent:{"border-radius":"10px","background-color":"#fefefe","margin-top":"50px","margin-bottom":"auto","margin-left":"auto","margin-right":"auto",padding:" -1px",width:"700px",height:"675px"},iframe:{"border-radius":"inherit",margin:"0px",padding:"0px",border:"none"}},t={options:{staging:"https://preprod.aadhaarapi.com",production:"https://prod.aadhaarapi.com",bsaURL:"https://bsa.aadhaarapi.com",itdURL:"https://itd.zoop.one",itdProdURL:"https://itd.zoop.one",itdStagingURL:"https://itd-staging.zoop.one",eSignV4URL:"https://esign.zoop.one",url:"https://prod.aadhaarapi.com",zoopModel:window.document.getElementById("zoop-gateway-model"),zoopWindow:null},styles:e,esignGatewayOptions:{gateway_url:"",transaction_id:"",company_display_name:"",color_bg:"0FACF3",color_ft:"FFFFFF",logo_url:"",otp_mode:"y",fp_mode:"y",ir_mode:"y",phone_auth:"null",draggable_sign:"y",google_sign:"null",customer_email:"",customer_phone:"",show_download_btn:"Y",mode:"POPUP"},incomeTaxReturnsOptions:{txt_color:"202020",bg_color:"f5f5f5",btn_color:"0075f3",btn_txt_color:"ffffff",platform:"web",sdk_version:"2",logo_url:""},check:function(o,e){return!!o.hasOwnProperty(e)&&(!!t.isNullUndefinedOrEmpty(o[e])||"undefined"!==e&&null!==e&&0!==e.length)},onError:function(){},onSuccess:function(){},isNullUndefinedOrEmpty:function(o){return null==o||0===o.length},setEnvironment:function(o){switch(o){case"production":t.options.url=t.options.production,t.options.itdURL=t.options.itdProdURL;break;case"staging":t.options.url=t.options.staging,t.options.itdURL=t.options.itdStagingURL}},setStyles:function(o,e,t){let n;if("class"==t){const e=document.getElementByClass(o);n=e&&e.style}else if("id"==t){const e=document.getElementById(o);n=e&&e.style}else n=document.getElementsByTagName(o);if(n&&Object.keys(e).length)for(var i in e)n[i]=e[i]},eSignGatewayInit:function(e){if(t.isNullUndefinedOrEmpty(e.company_display_name))throw new Error("Customer display name is mandatory to initiate gateway.");return t.esignGatewayOptions.company_display_name=e.company_display_name,t.esignGatewayOptions.color_bg=t.check(e,"color_bg")?e.color_bg:t.esignGatewayOptions.color_bg,t.esignGatewayOptions.color_ft=t.check(e,"color_ft")?e.color_ft:t.esignGatewayOptions.color_ft,t.esignGatewayOptions.logo_url=t.check(e,"logo_url")?e.logo_url:t.esignGatewayOptions.logo_url,t.esignGatewayOptions.otp_mode=t.check(e,"otp_mode")?e.otp_mode:t.esignGatewayOptions.otp_mode,t.esignGatewayOptions.fp_mode=t.check(e,"fp_mode")?e.fp_mode:t.esignGatewayOptions.fp_mode,t.esignGatewayOptions.ir_mode=t.check(e,"ir_mode")?e.ir_mode:t.esignGatewayOptions.ir_mode,t.esignGatewayOptions.phone_auth=t.check(e,"phone_auth")?e.phone_auth:t.esignGatewayOptions.phone_auth,t.esignGatewayOptions.draggable_sign=t.check(e,"draggable_sign")?e.draggable_sign:t.esignGatewayOptions.draggable_sign,t.esignGatewayOptions.google_sign=t.check(e,"google_sign")?e.google_sign:t.esignGatewayOptions.google_sign,t.esignGatewayOptions.customer_email=t.check(e,"customer_email")?e.customer_email:t.esignGatewayOptions.customer_email,t.esignGatewayOptions.customer_phone=t.check(e,"customer_phone")?e.customer_phone:t.esignGatewayOptions.customer_phone,t.esignGatewayOptions.show_download_btn=t.check(e,"show_download_btn")?e.show_download_btn:t.esignGatewayOptions.show_download_btn,e.mode&&e.mode.toUpperCase()===o.TAB?t.esignGatewayOptions.mode=o.TAB:t.esignGatewayOptions.mode=o.POPUP,t.options.zoopModel=window.document.getElementById("zoop-gateway-model"),!0},eSignGateway:function(e,n="v4"){if(t.isNullUndefinedOrEmpty(e))throw new Error("Gateway Transaction Id is mandatory to initiate gateway.");if(t.esignGatewayOptions.transaction_id=e,t.isNullUndefinedOrEmpty(t.esignGatewayOptions.company_display_name))throw new Error("Company Display Name is mandatory in gateway options.");switch(n){case"v3":t.esignGatewayOptions.gateway_url=t.options.url+"/esign/gateway/v3";break;default:t.esignGatewayOptions.gateway_url=t.options.eSignV4URL+"/v4/viewer",t.esignGatewayOptions.mode=o.TAB}let i=t.esignGatewayOptions.gateway_url+"/"+t.esignGatewayOptions.transaction_id+"?company_display_name="+t.esignGatewayOptions.company_display_name+"&color_bg="+t.esignGatewayOptions.color_bg+"&color_ft="+t.esignGatewayOptions.color_ft+"&otp_mode="+t.esignGatewayOptions.otp_mode+"&fp_mode="+t.esignGatewayOptions.fp_mode+"&ir_mode="+t.esignGatewayOptions.ir_mode+"&phone_auth="+t.esignGatewayOptions.phone_auth+"&draggable_sign="+t.esignGatewayOptions.draggable_sign+"&google_sign="+t.esignGatewayOptions.google_sign+"&can_select_device="+t.esignGatewayOptions.device_selection_allowed+"&phone="+t.esignGatewayOptions.customer_phone+"&logo_url="+t.esignGatewayOptions.logo_url+"&show_download_btn="+t.esignGatewayOptions.show_download_btn;t.esignGatewayOptions.mode===o.TAB?null==t.options.zoopWindow||t.options.zoopWindow.closed?t.options.zoopWindow=window.open(encodeURI(i),"_blank"):t.options.zoopWindow.focus():t.esignGatewayOptions.mode===o.POPUP&&(window.document.getElementById("zoop-model-content").innerHTML='<iframe id="zoop-gateway-iframe" height="100%" width="100%" src="'+encodeURI(i)+'"></iframe>',t.options.zoopModel.style.display="block")},initBsaGateway:function(o){t.bankStatementAnalysis={url:`${t.options.bsaURL}/?session_id=${o}&platform=web&sdk_v=2`}},openBsaGateway:function(){window.location=t.bankStatementAnalysis.url},initItdGateway:function(o={}){t.incomeTaxReturnsOptions.txt_color=t.check(o,"txt_color")?o.txt_color:t.incomeTaxReturnsOptions.txt_color,t.incomeTaxReturnsOptions.bg_color=t.check(o,"bg_color")?o.bg_color:t.incomeTaxReturnsOptions.bg_color,t.incomeTaxReturnsOptions.btn_color=t.check(o,"btn_color")?o.btn_color:t.incomeTaxReturnsOptions.btn_color,t.incomeTaxReturnsOptions.btn_txt_color=t.check(o,"btn_txt_color")?o.btn_txt_color:t.incomeTaxReturnsOptions.btn_txt_color,t.incomeTaxReturnsOptions.logo_url=t.check(o,"logo_url")?o.logo_url:t.incomeTaxReturnsOptions.logo_url},openItdGateway:function(o){if(t.isNullUndefinedOrEmpty(o))throw new Error("Gateway Transaction Id is mandatory to initiate gateway.");let e=`${t.options.itdURL}/?session_id=${o}&txt_color=${t.incomeTaxReturnsOptions.txt_color}&bg_color=${t.incomeTaxReturnsOptions.bg_color}&btn_color=${t.incomeTaxReturnsOptions.btn_color}&btn_txt_color=${t.incomeTaxReturnsOptions.btn_txt_color}&logo_url=${t.incomeTaxReturnsOptions.logo_url}&platform=${t.incomeTaxReturnsOptions.platform}&sdk_version=${t.incomeTaxReturnsOptions.sdk_version}`;window.document.getElementById("zoop-model-content").innerHTML='<iframe id="zoop-gateway-iframe" height="100%" width="100%" src="'+encodeURI(e)+'"></iframe>',t.options.zoopModel.style.display="block"}};const n={close:()=>{},"consent-denied":()=>{},"otp-error":()=>{},"gateway-error":()=>{},"esign-result":()=>{},"esign-success":()=>{},"esign-error":()=>{},"itd-error":()=>{},"itd-consent-denied":()=>{},"itd-gateway-terminated":()=>{},"itd-success":()=>{}};t.on=function(o="",e=(()=>{})){if("string"!=typeof o)throw new Error("Event name must be a string.");if("function"!=typeof e)throw new Error("Callback must be a function.");Object.keys(n).includes(o)?n[o]=e:console.warn(`No event found named ${o}`)},t.emit=function(o,e){n[o](e)},t.dispatchEvent=function(o){let e;if(![t.options.url,t.options.production,t.options.staging,t.options.bsaURL,t.options.itdURL,t.options.eSignV4URL].includes(o.origin))return console.log("Message is not from Zoop Gateway");if(o.data&&(e=o.data,e.hasOwnProperty("action")))switch(e.action){case"close":case"consent-denied":case"otp-error":case"gateway-error":case"esign-result":case"esign-success":case"esign-error":case"itd-error":case"itd-consent-denied":case"itd-gateway-terminated":case"itd-success":return e.payload="string"==typeof e.payload?JSON.parse(e.payload):e.payload,t.options.zoopModel.style.display="none",window.document.getElementById("zoop-model-content").innerHTML="",t.options.zoopWindow&&!t.options.zoopWindow.closed&&t.options.zoopWindow.close(),void t.emit(e.action,e);default:console.warn("Unsupported event: ",e.action)}},t.setStyles("zoop-gateway-model",e.zoopGateWayModel,"id"),t.setStyles("zoop-model-content",e.zoopModelContent,"id"),window.addEventListener("message",t.dispatchEvent,!1),window.zoop=t}()})();